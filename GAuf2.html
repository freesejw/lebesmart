<!DOCTYPE html>
<html>
<head>
<title>Gehirn 2</title>
<style>

#wrapper {
  width:450px;
  height:500px;
  background-color: #FFEFDB;
  padding: 10px;
  border: 1px solid black;
  margin: 5px;
  position:relative;
  background-color: #FFEFDB;
}
#bringTitel{

    position: absolute;
    left:80px;
    top:5px;
    color: #0000FF;
    font-size: 25px;
    font-weight: bold;
    line-height: 1.5em;

}

#wrtabelle1 {
position:absolute;
top:85px;
left:80px;
border-collapse:collapse;
border:1px solid #7f7f7f;
}


td {border:1px solid #0090E0;
background-color: white;
width:60px;
height:60px;
text-align:center;
font-size: 24px;
}

#myLevelProgress {
  position:absolute;
  left:25px;
  top:480px;
  width: 425px;
  height: 30px;
  background-color: #ddd;
  border:1px solid #0090E0;
}

      #myLevelBar { width: 0%; height: 100%;background-color:#0090E0;}
      #levelLabel {text-align: center; line-height: 30px; color: white;}


#LevelLabel {
    text-align: center;
    line-height: 30px;
    color: blue;
    padding-left:220px;
}
#suchZahl{
    position: absolute;
    left:80px;
    top:410px;
    color: blue;
    font-size: 18px;
    font-weight: bold;
    line-height: 1.5em;

}
#btnnr1 {
position:absolute;
    top: 380px;
    left:80px;
    background-color: blue; /* Green */
    border: 1 solid #0020FF;
    color: white;
    padding: 2px 2px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}

#btnnr2 {
position:absolute;
    top: 380px;
    left:220px;
    background-color: blue; /* Green */
    border: 1 solid #0020FF;
    color: white;
    padding: 2px 2px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}

</style>
</head>
<body onLoad="window.firstStart(anzahlZeilen,anzahlSpalten)">

<div id="wrapper">

<p id="bringTitel">Arbeitsspeicher &Uuml;bung 2</p>


<table  id="wrtabelle1"> </table>


<input type="button" class = "button" id="btnnr1" value="Start ( Level 1 )" onclick="secondStart(anzahlZeilen,anzahlSpalten)" />
<input type="button" class = "button" id="btnnr2" value="N&auml;chstes Level" onclick="nextLevel()" />


<div id="myLevelProgress">
  <div id="myLevelBar">
    <div id="LevelLabel">Level</div>
  </div>
</div>

<br>
<p id="suchZahl">Meldung : </p>
</div>
<script>

    var anzahlZeilen=4;
    var anzahlSpalten=4;
    var anzahlBlinks;
    var anzahlBlinksStart=3;
    var StopSofort=false;
    var progressValue=0;
    var maxValueStart=-1;
    var counter=0;
    var ausgabeArray=[0,0,0,0];
    var ausgabeZahlenReihe=[0,0,0,0,0,0,0,0,0];
    var schalter=false;
    var indexZelleVorgabe = [0,0,0,0,0,0,0,0,0];
    var indexSpalteVorgabe= [0,0,0,0,0,0,0,0,0,0];
    var snd = new Audio("pistol-1.wav"); // buffers automatically when created




        function firstStart(z,s)
       //Startet bei Aufruf des Programms
             {
                  start(z,s);
                  document.getElementById("btnnr2").disabled = true;

             }

        function secondStart(z,s)
          //Startet mit dem Button Start mit Level  1
          //

          {
          document.getElementById("btnnr2").disabled = false;
          document.getElementById("btnnr1").disabled = true;

             tabelle1.parentNode.removeChild(tabelle1);
             maxValueStart=9;
             anzahlBlinks=anzahlBlinksStart;
             start(z,s);
             counter=0;
             StopSofort=false;
             VorgabeZahlErmitteln(anzahlZeilen,anzahlSpalten);
                erzeugBlinken(ausgabeZahlenReihe);
             document.getElementById("myLevelBar").style.width="0%";

          }


      function start(row, col)

          {
            maxValue=maxValueStart;
            node = document.getElementById("wrtabelle1");
            node.appendChild(createTable(row, col, "tabelle1"), node);
             document.getElementById("suchZahl").style.color = "blue";
            document.getElementById("suchZahl").innerHTML =" Beginne mit Start (Level 1) " ;
          }

      function nextLevel()
      {
          //Entfernt die bestehende Tabelle und ersetzt
          // sie durch eine neue Tabelle mit neuen Zahlen

               document.getElementById("btnnr2").disabled = false;
               document.getElementById("btnnr1").disabled = true;

                tabelle1.parentNode.removeChild(tabelle1);

                maxValueStart=9;

                start(anzahlZeilen,anzahlSpalten);
                // z�hlt die klicks
                counter=0;
                // bei falschem Click wird StopSofort gleich true gesetzt
                StopSofort=false;
                VorgabeZahlErmitteln(anzahlZeilen,anzahlSpalten);
                erzeugBlinken(ausgabeZahlenReihe);
          }


      function createTable(row, col, id)
      {
          var myTable = document.createElement("table");
          var mytablebody = document.createElement("tbody");

          for (var j = 0; j < row; j++)
          {
              mycurrent_row = document.createElement("tr");
              for (var i = 0; i < col; i++)
               {
                  mycurrent_cell = document.createElement("td");
                  mycurrent_cell.addEventListener("click", function (iii, jjj)
                   {
                    //////////////////////////////////////////////////////////////////////////////////////

                      return function ()
                      {
                           pruef(jjj,iii);

                           if (StopSofort==true)
                                {
                                   myTable.setAttribute("data-locked", "true");
                                    progressValue=0;
                                    anzahlBlinks=anzahlBlinksStart;
                                    this.style.backgroundColor = "red";

                                    console.log(ausgabeZahlenReihe);
                                    playSound();
                                    snd.play();
                                    document.getElementById("suchZahl").style.color = "red";
                                    document.getElementById("suchZahl").innerHTML ="Falsche Feld Beginn wieder mit Start"
                                                                        ;
                                    document.getElementById("btnnr2").disabled = true;
                                    document.getElementById("btnnr1").disabled = false;
                                }


                          if (!myTable.getAttribute("data-locked"))

                             {

                             if (this.style.backgroundColor == "yellow")
                             {   this.style.backgroundColor = "#FF9F00";}
                                 else
                                  {this.style.backgroundColor = "yellow";}


                                if (anzahlBlinks == counter)
                                 {
                                    myTable.setAttribute("data-locked", "true");
                                     document.getElementById("suchZahl").style.color = "blue";
                                    document.getElementById("suchZahl").innerHTML ="Gut,auf zum n�chsten Level";
                                    levelMove();
                                     anzahlBlinks++;

                                     document.getElementById("btnnr2").disabled = false;
                                     document.getElementById("btnnr1").disabled = true;
                                 }

                                 if (progressValue >= 100)

                                   {
                                    document.getElementById("suchZahl").innerHTML =" Alle Level erfolgreich geschafft!" ;
                                    document.getElementById("suchZahl").style.color = "blue";
                                    document.getElementById("suchZahl").style.fontSize = "large";
                                    document.getElementById("btnnr2").disabled = true;
                                    document.getElementById("btnnr1").disabled = false;
                                   }
                            }
                          }
                       ////////////////////////////////////////////////////////////////////////////////////////////////
                    }
                  (i, j));

                  currenttext = document.createTextNode(random(maxValue));
                  mycurrent_cell.appendChild(currenttext);
                  mycurrent_row.appendChild(mycurrent_cell);
              }

              mytablebody.appendChild(mycurrent_row);
          }

          myTable.appendChild(mytablebody);
          myTable.setAttribute("ID", id);
          return myTable;
      }

       function pruef(z,s){

       // z Zeilenindex der geclickten Ziffer
       // s Spaltenindex der geclickten Ziffer
       // counter - globale Variable z�hlt die clicks
       // greift auf das Array vorgabe aus der Funktion VorgabeZahlErmitteln zu
       // in dem ARRay vorgabe befinden sich die L�nge der Zahl,der Zeilenindex und die Spaltenindizes.


        var clickRow=z;
        var clickCol=s;


              if ( (indexZelleVorgabe[counter] !=clickRow) ||  (indexSpalteVorgabe[counter] !=clickCol))

                  {StopSofort=true;
                  }
                  else
                  {StopSofort=false;
                    counter++;
                  }


          return StopSofort;
        }

function VorgabeZahlErmitteln(z,s)
 {

  for (var i = 0; i <= anzahlBlinks-1; i++)
  {
       var zindex=random(z-1);
       var sindex=random(s-1);
       indexZelleVorgabe[i]=zindex;
       indexSpalteVorgabe[i]=sindex;
       ausgabeZahlenReihe[i]= (zindex*anzahlSpalten)+sindex;
       if ( i>0)
       {
                if ( indexZelleVorgabe[i]== indexZelleVorgabe[i-1] &&  indexSpalteVorgabe[i]== indexSpalteVorgabe[i-1] )
                {i--;}
       }
       console.log("indeexspalte " +   indexSpalteVorgabe[i]  + " alle " + indexZelleVorgabe);

 }

 }

function erzeugBlinken(zwzw)
 {

   //  var blinkColors = new Array('#807EEA', 'white','#807EEA', 'white' );
     var blinkColors = new Array('#807EEA', 'white' );
     var zw= zwzw;
     var blinkColor = 0;
     var iterator = 0;
      var myBlink = setInterval(function() {
        doBlink();
      }, 100);

    function doBlink() {

       var blinkCell=document.getElementsByTagName('td');
       blinkCell[zw[iterator]].style.backgroundColor=blinkColors[blinkColor];
       blinkColor++;

      if (blinkColor == blinkColors.length)

      {
        blinkColor = 0;
        blinkCell[zw[iterator]].style.backgroundColor ="white";

        iterator++;

        if (iterator == anzahlBlinks)
          clearInterval(myBlink);
        else
          doBlink(zw[iterator]);
       }
    }
 }


     function levelMove()
        {
          var elem = document.getElementById("myLevelBar");

          if (progressValue >= 100)
           {progressValue=0; }

              else
              {
                 progressValue=progressValue+25;
                 width=progressValue;
                 elem.style.width = width + '%';
              }
          }



     function random(max)
          {
            return Math.floor((Math.random() *max) + 1);
          }
 var playSound = (function beep() {
    var snd = new Audio("data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");
    return function() {
        snd.play();
    }
})();


</script>
</body>
</html>