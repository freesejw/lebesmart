 <!DOCTYPE html>
<html>
<head>
 <h1>Konzentration und Schnelligkeit &Uuml;bung 1</h1>
<title>Gehirn Aufgabe5</title>
<style>



 #button1 {
    background-color: #00AFFF;
    border: 5 solid blue;
    color: white;
    padding: 2px 2px;
    text-align: center;
    font-size: 18px;

    }
table{
margin-top:30px;
 border: 0px solid white;
 clear:left;
}

//td{font-size:40px; padding:4px 10px;

}
td img {width:  100px;
    height: 75px;
    border:0px solid red;


    }

// #myLevelProgress {
//  position:absolute;
//  left:350px;
//  top:215px;
//  height: 300px;
//  background-color: #00AFFF;
//  border:1px solid #0090E0;
//   }

        #myLevelBar { width: 30px; height:100%;background-color:red;}
    //  #levelLabel {text-align: center; line-height: 30px; color: white;}

</style>
<script>

          var zw= new Array();
          var zwFake= new Array();
          var zwzw= new Array();
          //var trefferLeiste= new Array();
          var trefferLeiste = Array(0,0,0,0,0,0,0,0,0,0,0,0);
          var anzahlFeinde=9;
          var aktiveFeinde;
          var anzahlFreunde=3;
          var aktiveFreunde=3;
          var anzahlBilder;
          var startDate = new Date()
          var durchLauf = 0;
          var zeitVorgabe=0;
          var maxAnz=30;
          var myBlink;
          var vorgabeGesamtZeit=30;
          var gesamtZeit;
          var aufrufTimer=-1;
          var zwzaehler=0;
          var trefferGesamt=0;
          var timeOut=false;
          var marsch = new Audio('marching-01.wav');
          var restZeit;
          var trefferSumme;

   function Reset()
      {
          zw= new Array();
          zwFake= new Array();
          zwzw= new Array();
          //var trefferLeiste= new Array();
          trefferLeiste = Array(0,0,0,0,0,0,0,0,0,0,0,0);
          trefferLauf=0;
          anzahlFeinde=9;
          anzahlFreunde=3;
          aktiveFreunde=3;
          startDate = new Date()
          durchLauf = 0;
          zeitVorgabe=0;
          maxAnz=30;
          aufrufTimer=-1;
          trefferGesamt=0;
          timeOut=false;
          zwzaehler=0;
    }



          var images = {};
          images.img1 = new Image();
          images.img2 = new Image();
          images.img3 = new Image();
          images.img4 = new Image();
          images.img5 = new Image();
          images.img6 = new Image();
          images.img7 = new Image();
          images.img8 = new Image();
          images.img9 = new Image();
          images.img10 = new Image();
          images.img11 = new Image();
          images.img12 = new Image();

          images.img21 = new Image();
          images.img22 = new Image();
          images.img23 = new Image();
          images.img24 = new Image();
          images.img25 = new Image();
          images.img26 = new Image();
          images.img27 = new Image();
          images.img28 = new Image();
          images.img29 = new Image();
          images.img30 = new Image();
          images.img31 = new Image();
          images.img32 = new Image();


          images.img40 = new Image();
          images.img41 = new Image();

          images.img1.src = "Terrorist1.jpg";
          images.img2.src = "Terrorist2.jpg";
          images.img3.src = "Terrorist3.jpg";
          images.img4.src = "Terrorist4.jpg";
          images.img5.src = "Terrorist5.jpg";
          images.img6.src = "Terrorist6.jpg";
          images.img7.src = "Terrorist7.jpg";
          images.img8.src = "Terrorist8.jpg";
          images.img9.src = "Terrorist9.jpg";
          images.img10.src = "Freund1.jpg";
          images.img11.src = "freund2.jpg";
          images.img12.src = "Freund3.jpg";

          images.img21.src = "ToterTerrorist1.jpg";
          images.img22.src = "ToterTerrorist2.jpg";
          images.img23.src = "ToterTerrorist3.jpg";
          images.img24.src = "ToterTerrorist4.jpg";
          images.img25.src = "ToterTerrorist5.jpg";
          images.img26.src = "ToterTerrorist6.jpg";
          images.img27.src = "ToterTerrorist7.jpg";
          images.img28.src = "ToterTerrorist8.jpg";
          images.img29.src = "ToterTerrorist9.jpg";
          images.img30.src = "ToterFreund1.jpg";
          images.img31.src = "ToterFreund2.jpg";
          images.img32.src = "ToterFreund3.jpg";

          images.img40.src = "Baum.jpg";
          images.img41.src = "Baum2.jpg";

          

   function Play()
      {
            Reset();
            anzahlBilder=anzahlFreunde+anzahlFeinde;

            document.getElementById("nachricht").innerHTML = "Du hast " + vorgabeGesamtZeit + " Zeit";
            // Table erh�lt Knoten IMG

            for (var i = 0; i < maxAnz; i++)
              {
              var im = document.createElement("img");
              document.getElementById('bl' + i).appendChild(im);
              }

             myBlink = setInterval(function()
            {myTimer(zeitVorgabe) }, 100);


        }


   function myTimer(abb)

     {
         var endDate = new Date();
         var gesamtZeit = (endDate.getTime() - startDate.getTime()) / 1000;
         restZeit=Math.round(30- gesamtZeit);
         document.getElementById('bl31').innerHTML =restZeit;
         document.getElementById('bl31').style.color='red';
         document.getElementById('bl31').style.fontSize="20px";


         if (gesamtZeit > vorgabeGesamtZeit)
              {
                  timeOut=true;
              }

             if(timeOut==true)  //Abbruch wenn die Gesamtzeit erreicht ist.

             {

                 clearInterval(myBlink);
                 document.getElementById("nachricht").innerHTML = "Gesamtzeit erreicht, " + zwzaehler + " Punkte.";
                 marsch.pause();
                 marsch.currentTime = 0;
                 LoescheBilder();
                // trefferGesamt += TrefferProLauf();

             }

             else
             {
                document.getElementById('bl30').innerHTML ="Restzeit:  ";
                document.getElementById('bl30').style.color='red';
                document.getElementById('bl30').style.fontSize="20px";


                aufrufTimer++;   //Z�hlt die Zeiteinheiten

                   if ( aufrufTimer==abb)
                    {
                      // console.log("Gesamt Treffer  " + trefferGesamt + "  trefferprolauf " + TrefferProLauf());

                     //  trefferGesamt += TrefferProLauf();
                       document.getElementById('bl32').innerHTML ="Punkte";
                       document.getElementById('bl32').style.color='red';
                       document.getElementById('bl32').style.fontSize="20px";
                       document.getElementById('bl33').innerHTML =zwzaehler;
                      document.getElementById('bl33').style.color='red';
                       document.getElementById('bl33').style.fontSize="20px";

                       ErstellTrefferLeiste();
                       aufrufTimer=0;
                       VorgabeFake(10,maxAnz); //Zufallszahlen f�r die Positionierung der Fake Bilder in dem table
                       AuswahlBilderFeinde(2,5,9);
                       AuswahlBilderFreunde();
                       zw=VorgabeBilder((aktiveFeinde+aktiveFreunde),maxAnz); //Zufallszahlen f�r die Positionierung der Bilder in dem table
                       ErstellTrefferLeiste();
                       doBlink();
                     }
               }
       }

    function doBlink()
     {


         //console.log("durchlauf ist " + durchLauf);

                  if (timeOut)
              {
                  LoescheBilder();
                  //score();
              }
            Marschieren()
            LoescheBilder();
            ZeigFakeBilder();
            ZeigNeueBilder();
            zeitVorgabe=50;
        }



 ////////////////////////////////////////////////////////////////////////////////////////////////////////
  function hitColor(blink)
  {
         var bl=blink;
         var ii;
        // console.log("click auf " + bl);
         Schuss() ;
                  for (var i =0;i< (aktiveFeinde+aktiveFreunde);i++)
                  {

                     ii=zwzw[i]+20;

                     if (document.getElementById(bl).id==('bl' + zw[i]) )
                         {
                          document.querySelector('#bl' + zw[i] + ' img').src = images['img' + ii].src;
                          if (i<aktiveFeinde) {Beifall();}
                              else{Schrei();}
                          ZaehlTreffer(zwzw[i]-1);

                         }
                   }

          trefferSumme=0;
          for (i=0;i<anzahlFeinde;i++)
                {
                trefferSumme+=trefferLeiste[i];
                }

          if (trefferSumme ==aktiveFeinde)
         {
            aufrufTimer = zeitVorgabe - 1;
            console.log("alle getroffen, n�chste Runde!");
         }
  }




  function AuswahlBilderFeinde(minFeinde,maxFeinde,anzahlMaxFeinde)
  {

       var min=minFeinde;     // Minimum m�glicher aktiverFeinde im jeweiligen Lauf
       var max=maxFeinde -1;  // Msximum m�glicher aktiver Feinde im jeweiligen Lauf
       var a0= anzahlMaxFeinde;

       zwzw=[];
       aktiveFeinde = Math.floor(Math.random() * (max - min + 1) + min);  // Bestimmt Anzahl aktiver feinde
       var i;
       var j;
       var jj;
           for ( i= 0;i<aktiveFeinde;i++)
             {
                 zwzw[i]= (Math.floor((Math.random() *a0))+1);
                  if (i>0)
                                     {       jj=i;
                                             for (var j=0 ;j<= jj-1;j++)
                                             {
                                              if (zwzw[j]==zwzw[jj])
                                              i=i-1;
                                              }
                                     }

             }
             console.log("Feinde   " , zwzw);
      }



  function AuswahlBilderFreunde()
  {
      for ( i=anzahlFeinde;i< (anzahlFeinde+ anzahlFreunde);i++)
            {
             zwzw.push(i+1);
            }

   }

  function VorgabeBilder(anz,max)
            {
               // max: Grundgesamtheit - Anzahl der Tabellenelemente
               // anz: Gesamtheit Freunde und Feinde in einem Durchlauf
                     var zwi= new Array();
                     var i;
                     var j;
                     var jj;
                       for (i = 0; i <= anz-1; i++)
                    {
                        zwi[i]=Math.floor((Math.random() *max));
                        if (i>0)
                               {       jj=i;
                                       for (j=0 ;j<= jj-1;j++)
                                       {
                                        if (zwi[j]==zwi[jj])
                                        i=i-1;
                                        }
                               }
                    }
                    console.log(zwi);
                return zwi;
                }

     function VorgabeFake(anz,max)
            {
               // Max: Anzahl der matrixelemente
               // anz Zahl der zu ermittelnden Zufallszahlen

                    for (var i = 0; i <= anz-1; i++)
                    {
                        zwFake[i]=Math.floor((Math.random() *max));

                    }

                }

       function LoescheBilder() {
            for (var i = 0; i < maxAnz; i++)
            {
                  document.querySelector('#bl' + i + ' img').src ="/:0";
                  document.querySelector('#bl' + i + ' img').style.display = "none";
            }
        }


         function ZeigNeueBilder() {

            for (var i = 0; i < (aktiveFeinde+aktiveFreunde); i++)
            {
                if(typeof zw[i] != 'undefined')
                {
                  //console.log("setze " + i + " / " + zwzw[i]);

                  document.querySelector('#bl' + zw[i] + ' img').style.display = "table";
                  document.querySelector('#bl' + zw[i] + ' img').src = images['img' + zwzw[i]].src;
                }

                else
                {
                  console.log("Es wurde versucht zw[" + i + "] zu verwenden, Wert ist ung�tig!");
                }
            }

          }


       function ZeigFakeBilder()
          {
              // sollen Bild stabil halten

              document.querySelector('#bl' + 0 + ' img').style.display = "table";
              document.querySelector('#bl' + 0 + ' img').src = images['img' + 41].src;
              document.querySelector('#bl' + 8 + ' img').style.display = "table";
              document.querySelector('#bl' + 8 + ' img').src = images['img' + 41].src;
              document.querySelector('#bl' + 12 + ' img').style.display = "table";
              document.querySelector('#bl' + 12 + ' img').src = images['img' + 41].src;
              document.querySelector('#bl' + 15 + ' img').style.display = "table";
              document.querySelector('#bl' + 15 + ' img').src = images['img' + 41].src;
              document.querySelector('#bl' + 23 + ' img').style.display = "table";
              document.querySelector('#bl' + 23 + ' img').src = images['img' + 41].src;
              document.querySelector('#bl' + 29 + ' img').style.display = "table";
              document.querySelector('#bl' + 29 + ' img').src = images['img' + 41].src;





              for (var i = 0; i <= 9; i++)
              {
                if(typeof zwFake[i] != 'undefined')
                {
                  //console.log("setze FAKE " + i + " / " + zwFake[i]);
                  document.querySelector('#bl' + zwFake[i] + ' img').style.display = "table";
                  document.querySelector('#bl' + zwFake[i] + ' img').src = images['img' + 40].src;
                }
                else
                {
                  console.log("Es wurde versucht zwFake[" + i +"] zu verwenden, Wert ist ung�ltig!");
                }

              }

           }

     function ErstellTrefferLeiste()
         {
            for (var i = 0; i < (anzahlFeinde + anzahlFreunde); i++)
                       {
                       trefferLeiste[i]=0;
                        }
          }


      function ZaehlTreffer(gedrueckt)
           {
               //nur ein Treffer pro Durchlauf wird gez�hlt.

               var ii=gedrueckt;
               if(  trefferLeiste[ii]==0)
               {
               var trefferLeistenPunkte = Array(1,1,1,1,1,1,1,1,1,-3,-3,-3);
               trefferLeiste[ii]=1;

               marsch.pause();
               zwzaehler+=trefferLeistenPunkte[ii] * trefferLeiste[ii];
               document.getElementById('bl33').innerHTML =zwzaehler;

               }

           }





      function Schuss()
         {
              var win = new Audio('colt45.wav');
              win.play();
          }

        function Beifall()
          {
              var win = new Audio('pain-sound.wav');
              win.volume=0.5;
              win.play();
          }

        function Schrei()
         {
              var win = new Audio('scream-01.wav');
              win.play();
              win.play();
              win.play();
              win.play();
          }

         function Marschieren()
           {
                marsch.volume=0.1;
                marsch.play();
            }




</script>
</head>
<body>

<table>

 <tr>

  <td id = "bl0" onclick="hitColor('bl0')"></td>
  <td id = "bl1" onclick="hitColor('bl1')"></td>
  <td id = "bl2" onclick="hitColor('bl2')"></td>
  <td id = "bl3" onclick="hitColor('bl3')"></td>
  <td id = "bl4" onclick="hitColor('bl4')"></td>

 </tr>

 <tr>
  <td id = "bl5" onclick="hitColor('bl5')"></td>
  <td id = "bl6" onclick="hitColor('bl6')"></td>
  <td id = "bl7" onclick="hitColor('bl7')"></td>
  <td id = "bl8" onclick="hitColor('bl8')"></td>
  <td id = "bl9" onclick="hitColor('bl9')"></td>
  </tr>

 <tr>
  <td id = "bl10" onclick="hitColor('bl10')"></td>
  <td id = "bl11" onclick="hitColor('bl11')"></td>
  <td id = "bl12" onclick="hitColor('bl12')"></td>
  <td id = "bl13" onclick="hitColor('bl13')"></td>
  <td id = "bl14" onclick="hitColor('bl14')"></td>
  </tr>

  <tr>
         <td id = "bl30" ></td>
         <td id = "bl31" </td>
         <td id = "bl32" ></td>
         <td id = "bl33" </td>
  </tr>

  <tr>
  <td id = "bl15" onclick="hitColor('bl15')"></td>
  <td id = "bl16" onclick="hitColor('bl16')"></td>
  <td id = "bl17" onclick="hitColor('bl17')"></td>
  <td id = "bl18" onclick="hitColor('bl18')"></td>
  <td id = "bl19" onclick="hitColor('bl19')"></td>
  </tr>

   <tr>
  <td id = "bl20" onclick="hitColor('bl20')"></td>
  <td id = "bl21" onclick="hitColor('bl21')"></td>
  <td id = "bl22" onclick="hitColor('bl22')"></td>
  <td id = "bl23" onclick="hitColor('bl23')"></td>
  <td id = "bl24" onclick="hitColor('bl24')"></td>
  </tr>
    <tr>
  <td id = "bl25" onclick="hitColor('bl25')"></td>
  <td id = "bl26" onclick="hitColor('bl26')"></td>
  <td id = "bl27" onclick="hitColor('bl27')"></td>
  <td id = "bl28" onclick="hitColor('bl28')"></td>
  <td id = "bl29" onclick="hitColor('bl29')"></td>
  </tr>

</table>


<p id="nachricht"></p>
<p id="punkte"></p>

<input type="button" id="button1" value="Starte" onclick="Play()"></button>

</body>
</html>